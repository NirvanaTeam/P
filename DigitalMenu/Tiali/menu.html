<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>منوی کافه – نسخه موبایل زیباتر</title>

  <!-- Fonts -->
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" type="text/css" />
  <!-- Bootstrap RTL 5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />

  <style>
    :root{
      --brand-1:#104322; /* سبز تیره */
      --brand-2:#4E2916; /* قهوه‌ای */
      --brand-3:#939A71; /* زیتونی روشن */
      --bg:#FBFBF9;
      --card:#ffffff;
      --muted:#6b7280;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.08);
    }
    *{font-family: Vazir, Tahoma, sans-serif}
    body{background: var(--bg); color:#1f2937}

    /* نوار بالا */
    .appbar{position: sticky; top:0; z-index: 1000; backdrop-filter:saturate(1.2) blur(8px); background: linear-gradient(135deg, rgba(16,67,34,.96), rgba(78,41,22,.93));}
    .appbar .brand{color:#fff}
    .appbar .brand small{opacity:.8}

    /* دسته‌بندی‌ها – اسکرولی و چیپ */
    .cat-strip{position: sticky; top:56px; z-index: 999; background:linear-gradient(180deg, rgba(251,251,249,1), rgba(251,251,249,.92)); padding:.65rem .75rem .8rem; border-bottom:1px dashed rgba(16,67,34,.15)}
    .cat-chip{white-space:nowrap; border-radius: 999px; border:1px solid rgba(16,67,34,.12); background:#fff; color:#0f172a}
    .cat-chip.active{background: var(--brand-1); color:#fff; border-color:var(--brand-1)}

    /* کارت آیتم */
    .menu-card{border:none; border-radius: var(--radius); box-shadow: var(--shadow); overflow:hidden; background:var(--card); transition: transform .2s ease, box-shadow .2s ease}
    .menu-card:active{transform: scale(.995)}
    .menu-img{width:100%; height: 220px; object-fit: cover}
    .price{color:var(--brand-2); font-weight:600}
    .desc{color:var(--muted); font-size:.9rem}
    .add-btn{border-radius:999px}

    /* لوگو */
    .brand-logo{width:84px; height:84px; border-radius:50%; border:3px solid var(--brand-2); object-fit:cover}
    .logo-card{border-radius: var(--radius); background:#fff; box-shadow: var(--shadow)}

    /* نوار پایین (اَکشن‌ها) */
    .bottom-nav{position: sticky; bottom:0; z-index: 1000; background: rgba(255,255,255,.85); backdrop-filter: blur(10px); border-top:1px solid rgba(16,67,34,.12)}

    /* سبد خرید (Bottom Sheet) */
    .offcanvas-bottom{height: 70vh; border-top-left-radius:20px; border-top-right-radius:20px}

    /* Skeleton */
    .skel{background: linear-gradient(90deg, #eee, #f5f5f5, #eee); background-size:200% 100%; animation: shine 1.2s linear infinite}
    @keyframes shine{to{background-position:-200% 0}}

    /* فقط موبایل: مخفی‌سازی اسکرول افقی ناخوشایند و محدودسازی عرض */
    @media (min-width:768px){.only-mobile{max-width:520px; margin:auto}}
  </style>
</head>
<body>
  <div class="only-mobile">
    <!-- App Bar -->
    <nav class="appbar px-3 py-2 d-flex align-items-center justify-content-between">
      <div class="brand d-flex align-items-center gap-2">
        <img src="logo.jpg" alt="لوگوی کافه" class="brand-logo">
        <div>
          <div class="fw-bold">کافه تایم</div>
          <small>منوی امروز</small>
        </div>
      </div>
      <button class="btn btn-sm btn-light position-relative" data-bs-toggle="offcanvas" data-bs-target="#cartSheet" aria-controls="cartSheet">
        <i class="fa-solid fa-cart-shopping"></i>
        <span id="cartBadge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill text-bg-danger">0</span>
      </button>
    </nav>

    <!-- Category strip -->
    <div id="catStrip" class="cat-strip overflow-auto">
      <div class="d-flex gap-2 flex-nowrap" id="catContainer"></div>
    </div>

    <!-- محتوا -->
    <main class="container py-3" id="menuRoot">
      <!-- سکلتون اولیه -->
      <div class="row g-3" id="skeleton">
        ${Array.from({length: 6}).map(()=>`
          <div class='col-12'>
            <div class='menu-card p-2'>
              <div class='skel' style='height:220px;border-radius:16px'></div>
              <div class='p-2'>
                <div class='skel my-2' style='height:18px;border-radius:8px;width:60%'></div>
                <div class='skel my-2' style='height:14px;border-radius:8px;width:40%'></div>
                <div class='skel my-2' style='height:12px;border-radius:8px;width:80%'></div>
              </div>
            </div>
          </div>`).join('')}
      </div>
      <div class="row g-3 d-none" id="menuList"></div>

      <!-- لوگو/فوتر مینیمال -->
      <div class="logo-card mt-4 p-3 text-center">
        <img src="logo.jpg" class="brand-logo" alt="لوگو">
        <div class="small text-muted mt-2">تمامی حقوق محفوظ است | کافه ۲۰۲۵ ©</div>
      </div>
    </main>

    <!-- Bottom actions -->
    <div class="bottom-nav py-2 px-3 d-flex align-items-center justify-content-between">
      <button class="btn btn-outline-success flex-fill mx-1" id="btnHome"><i class="fa-solid fa-home me-1"></i>خانه</button>
      <button class="btn btn-outline-success flex-fill mx-1" id="btnTop"><i class="fa-solid fa-arrow-up me-1"></i>بالا</button>
      <button class="btn btn-success flex-fill mx-1" data-bs-toggle="offcanvas" data-bs-target="#cartSheet"><i class="fa-solid fa-basket-shopping me-1"></i>سبد</button>
    </div>
  </div>

  <!-- سبد خرید: Bottom Sheet -->
  <div class="offcanvas offcanvas-bottom" tabindex="-1" id="cartSheet" aria-labelledby="cartSheetLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="cartSheetLabel"><i class="fa-solid fa-bag-shopping ms-2"></i>سبد خرید</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column pt-0">
      <div id="cartItems" class="flex-grow-1 overflow-auto">
        <div class="text-center text-muted py-4">سبد خرید شما خالی است</div>
      </div>
      <div class="border-top pt-2">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="fw-semibold">جمع کل:</span>
          <span id="cartTotal" class="price">۰ تومان</span>
        </div>
        <button class="btn btn-success w-100" id="checkoutBtn" disabled>تسویه حساب</button>
      </div>
    </div>
  </div>

  <!-- Modal تصویر -->
  <div class="modal fade" id="imgModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius:18px; overflow:hidden">
        <img id="modalImg" src="" alt="" style="width:100%; height:auto" />
      </div>
    </div>
  </div>

  <script>
    // داده‌های منو - همان ساختار نسخه قبلی برای سازگاری
    const menuData = {
      "شیک‌ها": { english:"SHAKES", icon:"fa-glass-whiskey", items:[
        {name:"نوتلا", price:"100 تومان", description:"بستنی وانیلی + شیر + نوتلا دستساز 30 درصد فندق", image:"1.jpg"},
        {name:"بادام زمینی", price:"60 تومان", image:"2.jpg"},
        {name:"قهوه", price:"70 تومان", image:"3.jpg"},
        {name:"انبه", price:"130 تومان", image:"4.jpg"},
        {name:"طالبی", price:"60 تومان", image:"5.jpg"},
        {name:"موز شکلات", price:"100 تومان", image:"6.jpg"},
        {name:"توت فرنگی", price:"100 تومان", image:"7.jpg"},
        {name:"ماچا", price:"90 تومان", image:"8.jpg"},
        {name:"معجون", price:"160 تومان", description:"بستنی سنتی + شیر + موز + پسته + گردو + پودر نارگیل + کنجد + آناناس", image:"9.jpg"},
        {name:"پسته", price:"150 تومان", image:"10.jpg"},
        {name:"موز توت فرنگی", price:"110 تومان", image:"11.jpg"},
        {name:"برونی", price:"60 تومان", image:"12.jpg"},
        {name:"لوتوس", price:"90 تومان", image:"13.jpg"},
      ]},
      "نوشیدنی‌های گرم": { english:"HOT DRINKS", icon:"fa-mug-hot", items:[
        {name:"اسپرسو تک", price:"1 تومان", description:"قهوه 30-70", image:"14.jpg"},
        {name:"اسپرسو دبل", price:"1 تومان", description:"قهوه 30-70", image:"15.jpg"},
        {name:"لته کلاسیک", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + فوم شیر", image:"16.jpg"},
        {name:"لته فندقی", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + فوم شیر + سیروپ فندق", image:"17.jpg"},
        {name:"لته پسته", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + فوم شیر + کرم پسته", image:"18.jpg"},
        {name:"لته لوتوس", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + فوم شیر + کره لوتوس", image:"19.jpg"},
        {name:"کاپوچینو کلاسیک", price:"1 تومان", description:"قهوه اسپرسو تک + شیر + فوم شیر", image:"20.jpg"},
        {name:"کاپوچینو کاراملی", price:"1 تومان", description:"قهوه اسپرسو تک + شیر + فوم شیر + سیروپ کارامل", image:"21.jpg"},
        {name:"کورتادو", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + فوم شیر", image:"22.jpg"},
        {name:"آمریکانو", price:"1 تومان", description:"قهوه اسپرسو تک + آب جوش", image:"23.jpg"},
        {name:"نسکافه", price:"1 تومان", description:"قهوه اسپرسو تک + شیر + فوم شیر + شکر قهوه‌ای", image:"24.jpg"},
        {name:"هات چاکلت", price:"1 تومان", description:"شکلات + پودر کاکائو + خامه صبحانه + شیر + فوم شیر", image:"25.jpg"},
        {name:"موکاچینو", price:"1 تومان", description:"سیروپ شکلات + شیر + فوم شیر + قهوه اسپرسو تک", image:"26.jpg"},
        {name:"کارامل ماکیاتو", price:"1 تومان", description:"سیروپ وانیل + شیر + فوم شیر + قهوه اسپرسو تک + سس کارامل", image:"27.jpg"},
      ]},
      "آبمیوه‌ها": { english:"JUICES", icon:"fa-apple-alt", items:[
        {name:"شیرموز", price:"1 تومان", image:"28.jpg"},
        {name:"شیرموز بستنی", price:"1 تومان", image:"29.jpg"},
        {name:"آب طالبی", price:"1 تومان", image:"30.jpg"},
        {name:"آب طالبی بستنی", price:"1 تومان", image:"31.jpg"},
        {name:"آب هویج", price:"1 تومان", image:"32.jpg"},
        {name:"آب هویج بستنی", price:"1 تومان", image:"33.jpg"},
        {name:"آب انبه", price:"1 تومان", image:"34.jpg"},
        {name:"آب انبه بستنی", price:"1 تومان", image:"35.jpg"},
        {name:"آب پرتقال", price:"1 تومان", image:"36.jpg"},
        {name:"آب انار", price:"1 تومان", image:"37.jpg"},
        {name:"آب سیب", price:"1 تومان", image:"38.jpg"},
        {name:"آب سیب پرتقال", price:"1 تومان", image:"39.jpg"},
        {name:"آب هویج و کرفس", price:"1 تومان", image:"40.jpg"},
      ]},
      "نوشیدنی‌های سرد": { english:"COLD DRINKS", icon:"fa-snowflake", items:[
        {name:"آیس ماچا", price:"1 تومان", description:"ماچا اصل ژاپن + شیر + یخ", image:"41.jpg"},
        {name:"آیس لته کلاسیک", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + یخ", image:"42.jpg"},
        {name:"آیس لته فندقی", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + یخ + سیروپ فندق", image:"43.jpg"},
        {name:"آیس لته توت فرنگی", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + یخ + سیروپ کارامل + توت فرنگی", image:"44.jpg"},
        {name:"آیس اسپانیش", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + شیرعسل", image:"45.jpg"},
        {name:"آیس موکا", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + یخ + سیروپ شکلات", image:"46.jpg"},
        {name:"آیس کارامل", price:"1 تومان", description:"قهوه اسپرسو دبل + شیر + یخ + سیروپ کارامل", image:"47.jpg"},
        {name:"آیس آمریکانو", price:"1 تومان", description:"قهوه اسپرسو دبل + یخ", image:"48.jpg"},
        {name:"موهیتو", price:"1 تومان", description:"نعناء + لیمو تازه + نوشابه اسپیرایت + یخ", image:"49.jpg"},
        {name:"موهیتو کهکشانی", price:"1 تومان", description:"نعناء + لیمو تازه + نوشابه اسپیرایت + یخ + پنیرک + شربت موهیتو", image:"50.jpg"},
        {name:"رد موهیتو", price:"1 تومان", description:"نعناء + لیمو تازه + نوشابه اسپیرایت + یخ + توت فرنگی + شربت موهیتو", image:"51.jpg"},
        {name:"لیموناد", price:"1 تومان", description:"لیمو تازه + نوشابه اسپیرایت + یخ + شربت لیمو", image:"52.jpg"},
        {name:"لیموناد کهکشانی", price:"1 تومان", description:"لیمو تازه + نوشابه اسپیرایت + یخ + شربت لیمو + پنیرک", image:"53.jpg"},
      ]},
      "آیتم‌های رژیمی": { english:"DIET ITEMS", icon:"fa-seedling", items:[
        {name:"کیک وانیل گردو", price:"1 تومان", description:"آرد نارگیل + آرد بادام + روغن نارگیل + روغن هسته انگور + سفیده تخم مرغ + آرد برنج + گردو", image:"54.jpg"},
        {name:"کیک وانیل بادام", price:"1 تومان", description:"آرد نارگیل + آرد بادام + روغن نارگیل + روغن هسته انگور + سفیده تخم مرغ + آرد برنج + بادام", image:"55.jpg"},
        {name:"بستنی موز و توت فرنگی", price:"1 تومان", description:"موز + توت فرنگی + عسل وحشی یا شربت بدون قند", image:"56.jpg"},
        {name:"آیس آمریکانو", price:"1 تومان", description:"قهوه + یخ + آب تصفیه شده", image:"57.jpg"},
        {name:"هات چاکلت رژیمی", price:"1 تومان", description:"شکلات بدون شکر + آب + شربت بدون قند", image:"58.jpg"},
        {name:"آیس ماچا", price:"1 تومان", description:"ماچا اصل ژاپن + آب تصفیه شده + یخ + شربت بدون قند", image:"59.jpg"},
        {name:"شیر پسته", price:"1 تومان", description:"کره پسته بدون شکر + آب + عسل وحشی یا شربت بدون قند", image:"60.jpg"},
        {name:"شیر بادام", price:"1 تومان", description:"کره بادام بدون شکر + آب + عسل وحشی یا شربت بدون قند", image:"61.jpg"},
        {name:"شیر گردو", price:"1 تومان", description:"کره گردو بدون شکر + آب + عسل وحشی یا شربت بدون قند", image:"62.jpg"},
      ]},
      "بستنی و فالوده": { english:"ICE CREAM & FALOODEH", icon:"fa-ice-cream", items:[
        {name:"بستنی سنتی مخصوص", price:"1 تومان", description:"بستنی سنتی + خامه بدون شکر + خامه پولکی + مربای آلبالو", image:"63.jpg"},
        {name:"فالوده", price:"1 تومان", description:"فالوده + شربت آلبالو + آبلیمو", image:"64.jpg"},
        {name:"فالوده بستنی", price:"1 تومان", description:"بستنی سنتی + فالوده + شربت آلبالو + آبلیمو", image:"65.jpg"},
        {name:"سان شاین", price:"1 تومان", description:"بستنی سنتی + خامه بدون شکر + توت فرنگی + موز + آناناس", image:"66.jpg"},
        {name:"وافل بستنی", price:"1 تومان", description:"نان وافل + سس شکلات + موز + گردو + توت فرنگی + بستنی سنتی", image:"67.jpg"},
        {name:"نوتلا بستنی", price:"1 تومان", description:"بستنی وانیلی + نوتلا اصل + پودر کیک شکلاتی", image:"68.jpg"},
        {name:"آفوگاتو", price:"1 تومان", description:"بستنی سنتی + قهوه اسپرسو تک", image:"69.jpg"},
        {name:"کروسان بستنی", price:"1 تومان", description:"نصف کروسان شکلاتی + بستنی پسته‌ای + بستنی وانیلی", image:"70.jpg"},
        {name:"کنافه بستنی", price:"1 تومان", description:"کنافه کره‌ای بدون شربت + خامه بدون شکر + بستنی سنتی", image:"71.jpg"},
        {name:"ژلاتو توت فرنگی", price:"1 تومان", image:"72.jpg"},
        {name:"ژلاتو انبه", price:"1 تومان", image:"73.jpg"},
        {name:"ژلاتو نوتلا", price:"1 تومان", image:"74.jpg"},
        {name:"ژلاتو قهوه", price:"1 تومان", image:"75.jpg"},
        {name:"ژلاتو بادام زمینی", price:"1 تومان", image:"76.jpg"},
        {name:"ژلاتو موز شکلات", price:"1 تومان", image:"77.jpg"},
        {name:"ژلاتو پسته", price:"1 تومان", image:"78.jpg"},
        {name:"ژلاتو لوتوس", price:"1 تومان", image:"79.jpg"},
        {name:"ژلاتو آناناس", price:"1 تومان", image:"80.jpg"},
        {name:"ژلاتو ماچا پسته", price:"1 تومان", image:"81.jpg"},
        {name:"کافه گلاسه", price:"1 تومان", description:"بستنی وانیلی و پسته + قهوه", image:"82.jpg"},
      ]},
      "شیرینی و دسر": { english:"DESSERTS", icon:"fa-cookie", items:[
        {name:"کنافه سرشیر", price:"1 تومان", description:"باقلوا کنافه + سرشیر", image:"83.jpg"},
        {name:"چاکلت بری", price:"1 تومان", description:"توت فرنگی + شکلات مایع", image:"84.jpg"},
        {name:"چاکلت بری پسته", price:"1 تومان", description:"توت فرنگی + شکلات مایع + کره پسته", image:"85.jpg"},
        {name:"وافل نوتلا و میوه", price:"1 تومان", description:"نون وافل + شکلات نوتلا دستساز + موز + توت فرنگی + گردو", image:"86.jpg"},
        {name:"تیرامیسو", price:"1 تومان", image:"87.jpg"},
        {name:"کروسان شکلاتی", price:"1 تومان", image:"88.jpg"},
        {name:"نیویورک رول پسته", price:"1 تومان", image:"89.jpg"},
        {name:"پن سوئیس", price:"1 تومان", image:"90.jpg"},
        {name:"رول گردو و دارچین و کشمش", price:"1 تومان", image:"91.jpg"},
        {name:"چیزکیک لوتوس", price:"1 تومان", image:"92.jpg"},
        {name:"چیزکیک پسته", price:"1 تومان", image:"93.jpg"},
        {name:"چیزکیک دبل چاکلت", price:"1 تومان", image:"94.jpg"},
        {name:"چیزکیک نوتلا", price:"1 تومان", image:"95.jpg"},
        {name:"چیزکیک سن سباستین", price:"1 تومان", image:"96.jpg"},
        {name:"تارت پسته", price:"1 تومان", image:"97.jpg"},
        {name:"تارت توت فرنگی", price:"1 تومان", image:"98.jpg"},
        {name:"پاریس برست پسته", price:"1 تومان", image:"99.jpg"},
        {name:"کیک هویج", price:"1 تومان", image:"100.jpg"},
        {name:"کیک نوتلا", price:"1 تومان", image:"101.jpg"},
        {name:"کیک شکلاتی", price:"1 تومان", image:"102.jpg"},
        {name:"کیک موکا", price:"1 تومان", image:"103.jpg"},
        {name:"کیک خیس شکلاتی", price:"1 تومان", image:"104.jpg"},
        {name:"غول خامه‌ای", price:"1 تومان", image:"105.jpg"},
        {name:"رولت ترک", price:"1 تومان", image:"106.jpg"},
        {name:"رولت ساده بزرگ", price:"1 تومان", image:"107.jpg"},
        {name:"ماکارون", price:"1 تومان", image:"108.jpg"},
        {name:"موچی", price:"1 تومان", image:"109.jpg"},
      ]},
      "دمنوش‌ها": { english:"HERBAL TEAS", icon:"fa-leaf", items:[
        {name:"چای", price:"1 تومان", description:"چای سیلان", image:"110.jpg"},
        {name:"چای دارچین", price:"1 تومان", description:"چای سیلان + دارچین سیلان", image:"111.jpg"},
        {name:"چای ماسالا", price:"1 تومان", description:"هل + دارچین + زنجفیل + شیر + شیره انگور", image:"112.jpg"},
        {name:"دمنوش 1", price:"1 تومان", description:"گل گاوزبان + به لیمو", image:"113.jpg"},
        {name:"دمنوش 2", price:"1 تومان", description:"هل + دارچین + زنجفیل", image:"114.jpg"},
        {name:"دمنوش 3", price:"1 تومان", description:"آویشن + نعناء", image:"115.jpg"},
      ]},
    };

    // حالت‌ها
    let activeCategory = Object.keys(menuData)[0];
    const cart = [];

    // عناصر
    const catContainer = document.getElementById('catContainer');
    const menuList = document.getElementById('menuList');
    const skeleton = document.getElementById('skeleton');
    const cartBadge = document.getElementById('cartBadge');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');

    // ساخت چیپ‌های دسته‌بندی
    for(const cat of Object.keys(menuData)){
      const chip = document.createElement('button');
      chip.className = 'cat-chip btn btn-sm px-3 py-2';
      chip.innerHTML = `<i class="fa-solid ${menuData[cat].icon} ms-1"></i>${cat}`;
      chip.addEventListener('click', ()=>{
        document.querySelectorAll('.cat-chip').forEach(c=>c.classList.remove('active'));
        chip.classList.add('active');
        activeCategory = cat;
        renderMenu();
        // اسکرول به ابتدای محتوا
        document.getElementById('menuRoot').scrollIntoView({behavior:'smooth'});
      });
      if(cat===activeCategory) chip.classList.add('active');
      catContainer.appendChild(chip);
    }

    // رندر آیتم‌های منو
    function renderMenu(){
      menuList.classList.add('d-none');
      skeleton.classList.remove('d-none');
      menuList.innerHTML = '';
      const items = menuData[activeCategory].items;
      setTimeout(()=>{ // شبیه‌سازی بارگذاری
        for(const item of items){
          const col = document.createElement('div');
          col.className = 'col-12';
          col.innerHTML = `
            <article class="menu-card">
              <img loading="lazy" src="${item.image}" alt="${item.name}" class="menu-img" onclick="openImg('${item.image}')">
              <div class="p-3">
                <div class="d-flex justify-content-between align-items-start">
                  <div>
                    <h6 class="mb-1">${item.name}</h6>
                    <div class="price">${item.price}</div>
                  </div>
                  <button class="btn btn-success btn-sm add-btn" onclick="addToCart('${item.name}','${item.price}','${item.image}')"><i class="fa-solid fa-plus"></i></button>
                </div>
                ${item.description ? `<p class='desc mt-2 mb-0'>${item.description}</p>` : ''}
              </div>
            </article>`;
          menuList.appendChild(col);
        }
        skeleton.classList.add('d-none');
        menuList.classList.remove('d-none');
      }, 300);
    }

    // سبد خرید
    function addToCart(name, priceStr, image){
      const price = parseInt(priceStr);
      const existing = cart.find(i=>i.name===name);
      if(existing){ existing.qty += 1; }
      else{ cart.push({name, price, image, qty:1}); }
      updateCart();
    }
    function updateCart(){
      const totalItems = cart.reduce((s,i)=>s+i.qty,0);
      cartBadge.textContent = totalItems;
      checkoutBtn.disabled = totalItems===0;

      if(cart.length===0){
        cartItems.innerHTML = '<div class="text-center text-muted py-4">سبد خرید شما خالی است</div>';
      } else {
        cartItems.innerHTML = '';
        for(const [idx, it] of cart.entries()){
          const row = document.createElement('div');
          row.className = 'd-flex align-items-center justify-content-between border-bottom py-2';
          row.innerHTML = `
            <div class="d-flex align-items-center gap-2">
              <img src="${it.image}" alt="${it.name}" style="width:56px;height:56px;border-radius:12px;object-fit:cover">
              <div>
                <div class="fw-semibold small">${it.name}</div>
                <div class="price small">${(it.price*it.qty).toLocaleString('fa-IR')} تومان</div>
              </div>
            </div>
            <div class="btn-group" role="group">
              <button class="btn btn-outline-success btn-sm" onclick="decQty(${idx})">−</button>
              <button class="btn btn-light btn-sm" disabled>${it.qty}</button>
              <button class="btn btn-outline-success btn-sm" onclick="incQty(${idx})">+</button>
            </div>`;
          cartItems.appendChild(row);
        }
      }
      const total = cart.reduce((s,i)=>s+i.price*i.qty,0);
      cartTotal.textContent = `${total.toLocaleString('fa-IR')} تومان`;
    }
    function incQty(i){ cart[i].qty++; updateCart(); }
    function decQty(i){ cart[i].qty>1 ? cart[i].qty-- : cart.splice(i,1); updateCart(); }

    // تصویر بزرگ
    function openImg(src){
      document.getElementById('modalImg').src = src;
      const m = new bootstrap.Modal('#imgModal'); m.show();
    }
    window.openImg = openImg;
    window.addToCart = addToCart;
    window.incQty = incQty; window.decQty = decQty;

    // اسکرول به بالا
    document.getElementById('btnTop').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    // شروع
    renderMenu();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
