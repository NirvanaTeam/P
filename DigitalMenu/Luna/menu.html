<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>لونا - منوی دیجیتال (ویدئو روی کلیک تصویر)</title>
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<style>
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Vazir, Tahoma, sans-serif;
    background:#506551;
    color:#0a0a0a;
    padding:10px;
    overflow-x:hidden;
  }
  .menu-container{
    height:100vh;
    display:flex;
    gap:10px;
  }
  .categories-sidebar{
    width:120px;
    background:rgba(74,95,77,.5);
    border:1px solid #f9f9f4;
    border-radius:20px 0 0 20px;
    padding:18px 10px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:18px;
    overflow-y:auto;
    backdrop-filter: blur(2px);
    box-shadow:5px 0 15px rgba(0,0,0,.1);
    color:#f9f9f4;
  }
  .category-item{
    width:100%;
    padding:10px 6px;
    border-radius:14px;
    cursor:pointer;
    text-align:center;
    transition:.25s;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:6px;
    border:1px solid transparent;
  }
  .category-item:hover{transform:translateY(-2px); background:#2e3a30}
  .category-item.active{
    background:#f9f9f4;
    color:#4a5f4d;
    border-color:#f9f9f4;
    box-shadow:0 6px 16px rgba(249,249,244,.25);
  }
  .category-icon{font-size:22px}
  .category-name{font-size:13px; line-height:1.35; white-space:pre-line}
  .items-container{
    flex:1;
    background:rgba(249,249,244,.6);
    border:1px solid #f9f9f4;
    border-radius:0 20px 20px 0;
    padding:18px;
    display:flex;
    flex-direction:column;
    overflow-y:auto;
  }
  .items-title{
    font-size:22px;
    text-align:center;
    color:#000;
    padding-bottom:10px;
    border-bottom:2px dashed #eaeade;
    margin:0 0 6px 0;
    font-weight:600;
  }
  .items-english-title{
    text-align:center;
    color:#666;
    margin:0 0 16px 0;
    font-size:14px;
  }
  .menu-items{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(240px,1fr));
    gap:12px;
  }
  .menu-item{
    background:#fff;
    border:1px solid #ecece0;
    border-right:3px solid #4a5f4d;
    border-radius:10px;
    padding:12px;
    box-shadow:0 3px 6px rgba(0,0,0,.08);
    opacity:0; transform:translateY(12px);
    animation:fade .55s forwards;
  }
  @keyframes fade{to{opacity:1; transform:translateY(0)}}
  .item-name{font-weight:700; font-size:15px; color:#000; margin-bottom:6px}
  .item-description{font-size:13px; color:#666; line-height:1.5; margin-bottom:8px}
  .item-price{display:flex; justify-content:space-between; align-items:center; padding-top:6px; border-top:1px dashed #eee}
  .item-price .label{font-size:12px; color:#777}
  .item-price .value{font-weight:700; color:#000; font-size:14px}
  .cafe-logo{
    text-align:center;
    margin:16px 0;
    background:#fff;
    border:1px solid #f1f1e8;
    padding:12px;
    border-radius:10px;
  }
  .footer{
    text-align:center;
    padding:14px;
    margin-top:auto;
    background:#fff;
    border-radius:10px;
    border-top:1px solid #f1f1e8;
    color:#666; font-size:14px;
  }
  @media (max-width:768px){
    .categories-sidebar{width:95px; gap:12px; padding:12px 6px}
    .category-name{font-size:11px}
    .menu-items{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
  }
  @media (max-width:480px){
    .categories-sidebar{width:80px}
    .menu-items{grid-template-columns:1fr}
  }

  /* images block */
  .item-image{position:relative; width:100%; aspect-ratio:1/1; margin:-4px -4px 10px -4px; cursor:pointer}
  .item-image img{position:absolute; inset:0; width:100%; height:100%; object-fit:contain; border-radius:8px; display:block}

  /* --- Video overlay (blurred, brand-tinted) --- */
  #videoOverlay{
    position:fixed; inset:0; z-index:9999;
    display:none; align-items:center; justify-content:center;
    padding:18px;
    background:rgba(80,101,81,.55);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  #videoOverlay.active{display:flex}
  .video-shell{
    position:relative; width:min(92vw, 860px);
  }
  #videoPlayer{
    width:100%; height:auto; display:block; border-radius:14px; background:transparent;
  }
  #closeVideo{
    position:absolute; top:-12px; inset-inline-end:-12px;
    width:40px; height:40px; border-radius:50%;
    border:none; cursor:pointer;
    background:#f9f9f4; color:#4a5f4d; font-size:18px; box-shadow:0 6px 20px rgba(0,0,0,.25);
  }
  #videoCaption{
    margin-top:10px; text-align:center; color:#f9f9f4; font-weight:600;
  }
</style>
</head>
<body>
<div class="menu-container">
  <div class="categories-sidebar" id="categoriesSidebar"></div>
  <div class="items-container">
    <h2 class="items-title" id="itemsTitle">لونا</h2>
    <div class="items-english-title" id="itemsEnglishTitle">LUNA CAFE &amp; BISTRO</div>
    <div class="menu-items" id="menuItems"></div>
    <div class="cafe-logo">لونا | منوی دیجیتال</div>
    <div class="footer">تمامی حقوق محفوظ است | لونا ۱۴۰۳ ©</div>
  </div>
</div>

<!-- Video Overlay -->
<div id="videoOverlay" role="dialog" aria-modal="true" aria-label="پخش ویدئو">
  <div class="video-shell">
    <button id="closeVideo" title="بستن">×</button>
    <video id="videoPlayer" playsinline controls preload="metadata"></video>
    <div id="videoCaption"></div>
  </div>
</div>

<script>
  // فارسی‌سازی اعداد
  function toPersianNumbers(num) {
    const p = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];
    return (num+'').replace(/[0-9]/g, d => p[+d]);
  }
  function formatPrice(n){
    if(n === undefined || n === null || n === '') return '—';
    return toPersianNumbers((n+'').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')) + ' تومان';
  }

  // داده‌های منو (همان ساختار قبل)
  const menuData = {
    "بار گرم": {
      english: "HOT BAR",
      icon: "fa-solid fa-mug-saucer",
      items: [
        {name:"اسپرسو دبل", price: 50_000, img: "1.png"},
        {name:"اسپرسو سینگل", price: 50_000, img: "2.png"},
        {name:"لاته", price: 120_000, img: "3.png"},
        {name:"کاپوچینو", price: 120_000, img: "4.png"},
        {name:"کارامل ماکیاتو", price: 120_000, img: "5.png"},
        {name:"چای سیاه", price: 40_000, img: "6.png"},
        {name:"چای کرک", price: 120_000, img: "7.png"},
        {name:"موکا", price: 120_000, img: "8.png"},
        {name:"آمریکانو", price: 100_000, img: "9.png"},
        {name:"هات چاکلت", price: 130_000, img: "10.png"},
        {name:"وایت چاکلت", price: 130_000, img: "11.png"},
        {name:"ماسالا", price: 130_000, img: "12.png"}
      ]
    },
    "بار سرد": {
      english: "COLD BAR",
      icon: "fa-solid fa-glass-water",
      items: [
        {name:"آیس لاته", price: 120_000, img: "13.png"},
        {name:"آیس آمریکانو", price: 100_000, img: "14.png"},
        {name:"آیس موکا", price: 120_000, img: "15.png"},
        {name:"موهیتو", price: 120_000, img: "16.png"},
        {name:"لیموناد", price: 130_000, img: "17.png"},
        {name:"بلوهاوایی", price: 140_000, img: "18.png"},
        {name:"سودا لِمون", price: 70_000, img: "19.png"},
        {name:"نوشابه قوطی", price: 35_000, img: "20.png"},
        {name:"آب معدنی", price: 10_000, img: "21.png"}
      ]
    },
    "میلک‌شیک": {
      english: "MILKSHAKE",
      icon: "fa-solid fa-ice-cream",
      items: [
        {name:"اسپرسو شیک", price:160_000, img: "22.png"},
        {name:"شیک نوتلا", price:190_000, img: "23.png"},
        {name:"شیک لوتوس", price:180_000, img: "24.png"},
        {name:"چاکلت شیک", price:160_000, img: "25.png"},
        {name:"شیک موز شکلات", price:180_000, img: "26.png"},
        {name:"شیک پینات‌بری (کره بادام‌زمینی)", price:180_000, img: "27.png"},
        {name:"کلاسیک شیک", price:180_000, img: "28.png"}
      ]
    },
    "دمنوش": {
      english: "HERBAL TEA",
      icon: "fa-solid fa-seedling",
      items: [
        {name:"لیمو زنجبیل", price:80_000, img: "29.png"},
        {name:"مرکبات", price:80_000, img: "30.png"},
        {name:"رویال یاسمین", price:80_000, img: "31.png"},
        {name:"مونا رز", price:80_000, img: "32.png"},
        {name:"کالِندولا", price:80_000, img: "33.png"},
        {name:"کوهین‌بری", price:80_000, img: "34.png"},
        {name:"اَپل کرن‌بری", price:80_000, img: "35.png"},
        {name:"مراکشی", price:80_000, img: "36.png"},
        {name:"لیمون‌گِراس", price:80_000, img: "37.png"},
        {name:"لاوندر دریم", price:80_000, img: "38.png"},
        {name:"استرابری کیس", price:80_000, img: "39.png"},
        {name:"چای سبز", price:80_000, img: "40.png"},
        {name:"گل گاوزبان", price:80_000, img: "41.png"},
        {name:"بابونه", price:80_000, img: "42.png"},
        {name:"آویشن (عسل)", price:80_000, img: "43.png"},
        {name:"چای ترش", price:80_000, img: "44.png"}
      ]
    },
    "پاستا": {
      english: "PASTA",
      icon: "fa-solid fa-bowl-food",
      items: [
        {name:"پاستا چیکن آلفردو", description:"پنه، فیله مرغ، سس آلفردو، پنیر پارمسان، قارچ سوخاری", price:300_000, img: "45.png"},
        {name:"پاستا بیف آلفردو", description:"پنه، گوشت گوساله، سس آلفردو، پنیر پارمسان، قارچ سوخاری", price:350_000, img: "46.png"}
      ]
    },
    "سیب‌زمینی": {
      english: "FRIES",
      icon: "fa-solid fa-burger",
      items: [
        {name:"سیب‌زمینی ساده", price:150_000, img: "47.png"},
        {name:"سیب‌زمینی با پنیر دیپ", price:200_000, img: "48.png"},
        {name:"سیب‌زمینی بیکن آلفردو", price:250_000, img: "49.png"},
        {name:"سیب‌زمینی پیتزایی", price:250_000, img: "50.png"},
        {name:"سیب‌زمینی با سس آلفردو", price:200_000, img: "51.png"}
      ]
    },
    "سوخاری": {
      english: "FRIED",
      icon: "fa-solid fa-drumstick-bite",
      items: [
        {name:"بشقاب فیله سوخاری", price:350_000, description:"به‌همراه سالاد، نان تُست، سس و سیب‌زمینی", img: "52.png"},
        {name:"قارچ سوخاری", price:150_000, img: "53.png"}
      ]
    },
    "غذای رژیمی": {
      english: "FIT PLATE",
      icon: "fa-solid fa-leaf",
      items: [
        {name:"بشقاب فیله گریل", price:350_000, img: "54.png"},
        {name:"بشقاب سبزیجات", description:"—", price:300_000, img: "55.png"}
      ]
    },
    "پیش‌غذا و سالاد": {
      english: "SALAD & STARTER",
      icon: "fa-solid fa-plate-wheat",
      items: [
        {name:"سالاد سزار سوخاری", price:250_000, img: "56.png"},
        {name:"سالاد سزار گریل", price:250_000, img: "57.png"},
        {name:"سوپ روز", price:100_000, img: "58.png"},
        {name:"سوپ فصل", price:200_000, img: "59.png"}
      ]
    },
    "صبحانه": {
      english: "BREAKFAST",
      icon: "fa-solid fa-egg",
      items: [
        {name:"صبحانه ایرانی", description:"نان سنگک، پنیر، کره، مربا، گردو، ریحان، نان تُست، خیار، گوجه، زیتون", price:250_000, img: "60.png"},
        {name:"اُملت فرانسوی", description:"بیکن، قارچ، پنیر پارمسان و...", price:250_000, img: "61.png"},
        {name:"اُملت ایتالیایی", description:"بیکن/پپرونی، پنیر پیتزا و...", price:250_000, img: "62.png"},
        {name:"صبحانه انگلیسی", description:"تخم‌مرغ، سوسیس، بیکن، لوبیا و...", price:250_000, img: "63.png"},
        {name:"اُملت کوچه فرنگی", price:170_000, img: "64.png"}
      ]
    },
    "کیک": {
      english: "CAKES",
      icon: "fa-solid fa-cake-candles",
      items: [
        {name:"اسنیکرز", description:"شکلات، بادام‌زمینی، کارامل، خامه", price:85_000, img: "65.png"},
        {name:"پالپ", price:85_000, img: "66.png"},
        {name:"چیزکیک", description:"کارامل / وانیلی / توت‌فرنگی / موز", price:85_000, img: "67.png"},
        {name:"سیب دارچین", price:85_000, img: "68.png"},
        {name:"اورئو", price:85_000, img: "69.png"},
        {name:"تیرامیسو", price:85_000, img: "70.png"},
        {name:"چاک‌کیک", price:85_000, img: "71.png"},
        {name:"کوکی", price:45_000, img: "72.png"}
      ]
    },
    "پیتزا": {
      english: "PIZZA",
      icon: "fa-solid fa-pizza-slice",
      items: [
        {name:"پیتزا مخصوص لونا", description:"ژامبون گوشت و مرغ، سوسیس، سبزیجات، سس مخصوص", price:320_000, img: "73.png"},
        {name:"سیر و استیک", description:"گوشت استیک، سیر، سس آلفردو/مخصوص", price:320_000, img: "74.png"},
        {name:"چیکن", description:"مرغ، سبزیجات، سس مخصوص", price:320_000, img: "75.png"},
        {name:"مخلوط", description:"ژامبون گوشت و مرغ، سبزیجات، سس مخصوص", price:280_000, img: "76.png"},
        {name:"مارگاریتا", description:"پنیر موزارلا، سس مخصوص", price:250_000, img: "77.png"},
        {name:"سبزیجات", description:"سبزیجات تازه، قارچ، فلفل دلمه و...", price:250_000, img: "78.png"},
        {name:"آلفردو", description:"مرغ یا بیف با سس آلفردو", price:350_000, img: "79.png"},
        {name:"پپرونی", description:"پپرونی، سس مخصوص", price:320_000, img: "80.png"}
      ]
    },
    "ساندویچ": {
      english: "SANDWICH",
      icon: "fa-solid fa-burger",
      items: [
        {name:"برگر ویژه لونا", description:"برگر 200 گرم، پنیر موتزارلا، پنیر گودا، سس مخصوص + سیب‌زمینی + سالاد", price:350_000, img: "81.png"},
        {name:"چیز برگر", description:"برگر 200 گرم، سبزیجات، سالاد قارچ سوخاری، سس مخصوص لنا", price:270_000, img: "82.png"},
        {name:"برگر ساده", description:"برگر 200 گرم، سبزیجات، سالاد قارچ سوخاری، سس مخصوص لنا", price:250_000, img: "83.png"},
        {name:"ژامبون تنوری", description:"ژامبون گوشت، پنیر موتزارلا، پنیر گودا، سبزیجات، سالاد، قارچ سوخاری، سس مخصوص", price:320_000, img: "84.png"}
      ]
    }
  };

  // --- Video overlay controller ---
  const overlay = document.getElementById('videoOverlay');
  const player = document.getElementById('videoPlayer');
  const caption = document.getElementById('videoCaption');
  const closeBtn = document.getElementById('closeVideo');

  function openVideo(srcMp4, label, poster){
    // set poster preview (optional)
    if(poster){ player.setAttribute('poster', poster); } else { player.removeAttribute('poster'); }
    // set video source & play
    player.src = srcMp4;
    player.muted = true; // ensures autoplay on mobile; user can unmute
    caption.textContent = label || '';
    overlay.classList.add('active');
    // try playing (may require user gesture on some browsers)
    const playPromise = player.play();
    if(playPromise && typeof playPromise.catch === 'function'){
      playPromise.catch(()=>{/* ignore autoplay failure */});
    }
  }
  function closeVideo(){
    player.pause();
    player.removeAttribute('src');
    player.removeAttribute('poster');
    player.load();
    overlay.classList.remove('active');
  }
  closeBtn.addEventListener('click', closeVideo);
  overlay.addEventListener('click', (e)=>{
    // close when clicking outside the video
    if(e.target === overlay){ closeVideo(); }
  });
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && overlay.classList.contains('active')) closeVideo();
  });

  // رندر دسته‌بندی‌ها
  const categoriesSidebar = document.getElementById('categoriesSidebar');
  const menuItemsWrap = document.getElementById('menuItems');
  const itemsTitle = document.getElementById('itemsTitle');
  const itemsEnglishTitle = document.getElementById('itemsEnglishTitle');

  Object.keys(menuData).forEach((cat, idx) => {
    const btn = document.createElement('div');
    btn.className = 'category-item' + (idx===0 ? ' active' : '');
    btn.innerHTML = `<i class="${menuData[cat].icon} category-icon"></i><div class="category-name">${cat}</div>`;
    btn.addEventListener('click', () => {
      document.querySelectorAll('.category-item').forEach(el=>el.classList.remove('active'));
      btn.classList.add('active');
      renderItems(cat);
    });
    categoriesSidebar.appendChild(btn);
  });

  function renderItems(category){
    const data = menuData[category];
    itemsTitle.textContent = category;
    itemsEnglishTitle.textContent = data.english || '';
    menuItemsWrap.innerHTML = '';

    data.items.forEach((it, i) => {
      const card = document.createElement('div');
      card.className = 'menu-item';
      card.style.animationDelay = (i*0.06)+'s';
      const imgSrc = it.img || '';
      const mp4Src = imgSrc.replace(/\\.(png|jpg|jpeg|webp|gif)$/i, '.mp4');

      card.innerHTML = `
        <div class="item-image" title="نمایش ویدیو">
          <img src="${imgSrc}" alt="${it.name}">
        </div>
        <div class="item-name">${it.name}</div>
        ${it.description ? `<div class="item-description">${it.description}</div>` : ''}
        <div class="item-price">
          <span class="label">قیمت</span>
          <span class="value">${formatPrice(it.price)}</span>
        </div>
      `;

      // click-to-video
      const imgEl = card.querySelector('.item-image');
      imgEl.addEventListener('click', () => {
        if(!imgSrc){ return; }
        openVideo(mp4Src, it.name, imgSrc);

        // handle error if video missing
        const onError = () => {
          closeVideo();
          alert('ویدئوی مربوط به این آیتم پیدا نشد: ' + mp4Src);
          player.removeEventListener('error', onError);
        };
        player.addEventListener('error', onError, {once:true});
      });

      menuItemsWrap.appendChild(card);
    });
  }

  // شروع با اولین دسته‌بندی
  renderItems(Object.keys(menuData)[0]);
</script>
</body>
</html>
