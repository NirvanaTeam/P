<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>منوی رستوران</title>

  <!-- فونت Vazir -->
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" type="text/css" />
  <!-- Font Awesome (آیکون‌ها) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    /* =====================
       Design Tokens
       ===================== */
    :root {
      --primary: #0094DA; /* رنگ اصلی */
      --primary-600: #007bb5;
      --primary-200: #d9f1fc;
      --bg: #f5f7fb;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --radius-lg: 18px;
      --radius-md: 14px;
    }

    :root.dark {
      --bg: #0b1220;
      --card: #0f172a;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --border: #1f2937;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
      --primary-200: rgba(0,148,218,.17);
    }

    @font-face {
      font-family: 'ZFont';
      src: url('z.ttf') format('truetype');
      font-display: swap;
    }

    * { box-sizing: border-box; }

    html, body { height: 100%; }

    body {
      margin: 0;
      font-family: Vazir, Tahoma, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, var(--primary-200), transparent 60%),
        radial-gradient(800px 400px at 100% 100%, rgba(0,0,0,0.05), transparent 50%),
        var(--bg);
      color: var(--text);
      overflow: hidden; /* اسکرول داخل کانتینر اصلی انجام می‌شود */
    }

    /* Scrollbar زیباتر */
    *::-webkit-scrollbar { width: 10px; height: 10px; }
    *::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--primary), var(--primary-600)); border-radius: 10px; }
    *::-webkit-scrollbar-track { background: transparent; }

    /* لایه کلی */
    .app {
      max-width: 1260px;
      margin: 0 auto;
      padding: 12px;
      height: 100%;
      display: grid;
      grid-template-columns: 100px 1fr;
      gap: 12px;
    }

    .glass {
      background: color-mix(in lab, var(--card) 85%, transparent);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      backdrop-filter: saturate(130%) blur(10px);
    }

    /* سایدبار دسته‌بندی‌ها */
    .sidebar {
      padding: 12px 8px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 8px;
      overflow-y: auto;
    }

    .cat {
      display: grid;
      grid-template-columns: 36px 1fr;
      align-items: center;
      gap: 8px;
      padding: 10px 8px;
      border-radius: var(--radius-md);
      color: var(--muted);
      cursor: pointer;
      border: 1px dashed transparent;
      transition: .25s ease;
      user-select: none;
    }
    .cat:hover { background: rgba(0,0,0,.03); transform: translateY(-1px); }
    .cat.active {
      color: #fff;
      background: linear-gradient(135deg, var(--primary), var(--primary-600));
      box-shadow: 0 10px 20px rgba(0,148,218,.25);
    }
    .cat i { font-size: 18px; text-align: center; }
    .cat .name { font-size: 12px; line-height: 1.3; font-family: ZFont, Vazir, Tahoma, sans-serif; }

    /* محتوای آیتم‌ها */
    .content {
      display: grid;
      grid-template-rows: auto 1fr auto;
      overflow: hidden;
    }

    /* نوار ابزار بالای لیست (ساده شده: فقط برند + دکمه تم) */
    .toolbar {
      position: sticky; top: 0; z-index: 3;
      padding: 10px 12px;
      display: grid; gap: 10px; grid-template-columns: 1fr auto;
      align-items: center;
      background: color-mix(in lab, var(--card) 88%, transparent);
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(10px);
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }

    .brand {
      display: flex; align-items: center; gap: 10px;
      font-weight: 600; color: var(--primary);
      min-width: 0;
    }
    .brand i { font-size: 18px; }
    .brand span { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      border: 1px solid transparent; cursor: pointer;
      padding: 9px 12px; border-radius: 12px;
      transition: .2s ease; user-select: none;
    }
    .btn.primary { background: linear-gradient(135deg, var(--primary), var(--primary-600)); color: #fff; }
    .btn.primary:hover { transform: translateY(-1px); box-shadow: 0 10px 20px rgba(0,148,218,.25); }
    .btn.ghost { color: var(--muted); border-color: var(--border); background: var(--card); }
    .btn.ghost:hover { background: rgba(0,0,0,.04); }

    .items-wrap { padding: 14px; overflow-y: auto; -webkit-overflow-scrolling: touch; touch-action: pan-y; }

    .title { font-size: 18px; color: var(--primary); font-weight: 700; margin: 0 0 12px; display: flex; align-items: center; gap: 8px; }
    .title i { font-size: 18px; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 12px;
    }

    .card {
      position: relative;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: transform .25s ease, box-shadow .25s ease;
      transform: translateY(6px);
      opacity: 0;
      animation: fadeInUp .6s forwards;
      content-visibility: auto;
      contain-intrinsic-size: 360px;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 14px 30px rgba(0,0,0,.12); }

    @keyframes fadeInUp {
      to { transform: translateY(0); opacity: 1; }
    }

    /* جعبه تصویر با نسبت ثابت + اسکلت لودینگ */
    .img-box { position: relative; aspect-ratio: 4 / 3; overflow: hidden; background: #e9eff5; }
    .img-box.loading::after {
      content: "";
      position: absolute; inset: 0;
      background: linear-gradient(90deg, #e9eff5 0%, #f4f7fb 40%, #e9eff5 80%);
      background-size: 200% 100%;
      animation: shimmer 1.2s linear infinite;
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .img-box img {
      width: 100%; height: 100%;
      object-fit: cover; display: block; transition: transform .35s ease;
    }
    .card:hover .img-box img { transform: scale(1.05); }

    .content-box { padding: 12px; }
    .name { font-weight: 800; font-size: 14px; margin-bottom: 6px; }
    .desc { color: var(--muted); font-size: 12px; line-height: 1.6; min-height: 34px; }

    .price-row { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-top: 10px; }
    .price-tag { color: var(--primary-600); font-weight: 800; font-size: 14px; }
    .price-col { display: grid; gap: 4px; }
    .price-label { font-size: 11px; color: var(--muted); }

    /* Modal تصویر */
    .modal {
      position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 50;
      background: rgba(0,0,0,.85);
    }
    .modal.open { display: flex; }
    .modal-inner { position: relative; max-width: 92%; max-height: 90vh; }
    .modal img { max-width: 100%; max-height: 86vh; border-radius: 12px; object-fit: contain; }
    .modal .close {
      position: absolute; inset-inline-end: -8px; inset-block-start: -46px; font-size: 32px; color: #fff; cursor: pointer;
    }

    /* Welcome Popup با افکت شیشه‌ای */
    .welcome {
      position: fixed; inset: 0; z-index: 60; display: grid; place-items: center; background: rgba(0,0,0,.35);
      backdrop-filter: blur(2px);
    }
    .welcome .box {
      width: min(560px, 92%);
      padding: 24px 18px; text-align: center;
      border-radius: 20px; border: 1px solid var(--border);
      background: linear-gradient(180deg, color-mix(in lab, var(--card) 85%, transparent), color-mix(in lab, var(--card) 70%, transparent));
      box-shadow: var(--shadow);
    }
    .welcome h2 { margin: 0 0 8px; font-size: 24px; color: var(--primary); }
    .welcome p { margin: 0 0 16px; color: var(--text); }
    .welcome .btns { display: grid; gap: 10px; grid-template-columns: 1fr 1fr; }

    /* فوتر */
    .footer {
      padding: 10px 14px; font-size: 13px; color: var(--muted);
      border-top: 1px solid var(--border); display: flex; align-items: center; justify-content: center; gap: 6px;
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
      background: color-mix(in lab, var(--card) 88%, transparent);
    }
    .footer a { color: var(--primary); text-decoration: none; }
    .footer a:hover { text-decoration: underline; }

    /* دکمه شناور رفتن بالا */
    .to-top {
      position: fixed; inset-inline-end: 20px; inset-block-end: 20px; z-index: 20;
      opacity: 0; visibility: hidden; transform: translateY(10px); transition: .25s ease;
    }
    .to-top.show { opacity: 1; visibility: visible; transform: translateY(0); }

    /* ریسپانسیو */
    @media (max-width: 900px) {
      .app { grid-template-columns: 90px 1fr; }
    }

    @media (max-width: 640px) {
      .app { grid-template-columns: 82px 1fr; padding: 8px; gap: 8px; }
      .welcome .btns { grid-template-columns: 1fr; }
      .title { font-size: 16px; }
      .grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 10px; }
    }

    /* احترام به کاربران حساس به حرکت */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
      .img-box.loading::after { display: none; }
    }
  </style>
</head>
<body>
  <!-- پنجره خوشامدگویی -->
  <div class="welcome" id="welcome">
    <div class="box glass">
      <h2>اهلا وسهلا بکم</h2>
      <p>برای شروع روی دکمه زیر بزنید</p>
      <div class="btns">
        <button class="btn primary" id="startBtn"><i class="fas fa-utensils"></i><span>مشاهده منو</span></button>
        <button class="btn ghost" id="instaBtn"><i class="fab fa-instagram"></i><span>اینستاگرام ما</span></button>
      </div>
    </div>
  </div>

  <!-- موزیک پس‌زمینه -->
  <audio id="bgm" loop>
    <source src="Song.mp3" type="audio/mpeg" />
    مرورگر شما از پخش صدا پشتیبانی نمی‌کند.
  </audio>

  <!-- مودال تصویر -->
  <div class="modal" id="imgModal">
    <div class="modal-inner">
      <span class="close" id="closeModal">&times;</span>
      <img id="modalImage" alt="" />
    </div>
  </div>

  <!-- بدنه اپ -->
  <div class="app">
    <!-- سایدبار دسته‌ها -->
    <aside class="sidebar glass" id="sidebar"></aside>

    <!-- محتوا -->
    <main class="content glass">
      <!-- نوار ابزار بالا (حذف سرچ و مرتب‌سازی) -->
      <div class="toolbar">
        <div class="brand" id="brandTitle"><i class="fa-solid fa-bowl-food"></i><span>منوی رستوران</span></div>
        <button class="btn ghost" id="themeBtn" title="تغییر حالت روشن/تاریک">
          <i class="fa-solid fa-moon"></i>
          <span class="hide-sm">ظاهر</span>
        </button>
      </div>

      <!-- لیست آیتم‌ها -->
      <div class="items-wrap" id="itemsWrap">
        <h2 class="title" id="itemsTitle"><i class="fa-solid fa-bowl-food"></i><span>...</span></h2>
        <section class="grid" id="grid"></section>

        <!-- لوگو -->
        <div style="text-align:center; margin: 14px 0 2px;">
          <img src="logo.png" alt="لوگوی رستوران" style="max-width: 160px; max-height: 80px; opacity:.9;" onerror="this.style.display='none'" />
        </div>
      </div>

      <!-- فوتر -->
      <footer class="footer">
        <span>طراحی شده توسط تیم</span>
        <a href="https://nirvanadev.ir" target="_blank" rel="noopener">نیروانا</a>
      </footer>
    </main>
  </div>

  <!-- دکمه شناور بالا -->
  <button class="btn primary to-top" id="toTop"><i class="fa-solid fa-arrow-up"></i><span>بالا</span></button>

  <script>
    // ====== داده‌ها ======
    const menuData = {
      "شاورما": [
        {name: "شاورما دجاج باگت", description: "ساندویچ شاورما مرغ با نان مخصوص", price: "185", image: "1.jpg"},
        {name: "شاورما دجاج عربی", description: "ساندویچ لقمه شده همراه سیب زمینی + سالاد + سس", price: "255", image: "A3.jpg"},
        {name: "شاورما دجاج صاج", description: "ساندویچ شاورما صاج با نون مخصوص", price: "255", image: "2.jpg"},
        {name: "مینی شاورما", description: "نصف ساندویچ شاورما با نان مخصوص", price: "100", image: "3.jpg"},
        {name: "پرس شاورما", description: "۲۵۰ گرم شاورما + سالاد + نان", price: "400", image: "4.jpg"}
      ],
      "فلافل": [
        {name: "ساندویچ فلافل", description: "ساندویچ فلافل 5 عددی با نان مخصوص و سبزیجات تازه", price: "100", image: "5.jpg"},
        {name: "ساندویچ فلافل مُشَکَل", description: "ساندویچ فلافل همراه سیب زمینی + بادمجان", price: "120", image: "6.jpg"},
        {name: "ساندویچ فلافل مخصوص زعتر", description: "نان صاج همراه فلافل + حمص", price: "110", image: "7.jpg"},
        {name: "فلافل تکی", description: "", price: "15", image: "A1.jpg"},
        {name: "ساندویچ هات داگ", description: "هات داگ با نان مخصوص و سس های ویژه", price: "120", image: "8.jpg"},
        {name: "همبرگر", description: "همبرگر دست ساز", price: "280", image: "A2.WEBP"}
      ],
      "معجنات": [
        {name: "مینی صفیحه", description: "گوشت، گوجه، پیاز چرخ کرده، ادویه مخصوص", price: "88", image: "9.jpg"},
        {name: "مینی دجاج بالعجین", description: "مرغ شاورما، پنیر، قارچ، ذرت، زیتون", price: "88", image: "10.jpg"},
        {name: "مینی پیتزا دجاج", description: "مرغ شاورما، پنیر، قارچ، ذرت، زیتون", price: "98", image: "25.jpg"},
        {name: "مینی زعتر", description: "آویشن لبنانی، روغن زیتون، کنجد", price: "88", image: "12.jpg"},
        {name: "مینی زعتر قشقوان", description: "آویشن لبنانی، روغن زیتون، پنیر پیتزا", price: "88", image: "13.jpg"},
        {name: "مینی محمره قشقوان", description: "سس مخصوص تند، پنیر، کنجد، سیاه دانه", price: "88", image: "14.jpg"},
        {name: "مینی کبابه", description: "گوشت کبابی، ادویه مخصوص زعتر", price: "88", image: "15.jpg"},
        {name: "مینی جنبه زیتون", description: "پنیر، زیتون، ادویه مخصوص زعتر", price: "88", image: "16.jpg"},
        {name: "مینی جبن بالعجین", description: "پنیر پیتزا، ادویه مخصوص زعتر", price: "88", image: "17.jpg"},
        {name: "مینی پپرونی", description: "پپرونی با پنیر و سس مخصوص", price: "98", image: "18.jpg"}
      ],
      "صحون\n(بشقاب ها)": [
        {name: "کبه برنج", description: "کبۀ مخصوص با برنج عربی و ادویه‌های ویژه", price: "88", image: "19.jpg"},
        {name: "سیب زمینی", description: "سیب زمینی سرخ شده با ادویه مخصوص", price: "120", image: "20.jpg"},
        {name: "سیب زمینی مخصوص زعتر", description: "سیب زمینی با ادویه مخصوص و مرغ شاورما", price: "220", image: "21.jpg"},
        {name: "سمبوسه پیتزایی", description: "سمبوسه مواد پیتزا و پنیر پیتزا و ادویه مخصوص", price: "78", image: "22.jpg"},
        {name: "سمبوسه ساده", description: "سمبوسه با سیب زمینی و سبزیجات", price: "68", image: "22.jpg"}
      ],
      "پیتزا لبنانی": [
        {name: "پیتزا بعلبکی", description: "پیتزا مخصوص سرآشپز - مرغ شاورما، مواد پیتزا، خمیر مخصوص دو طرفه", priceSingle: "248", priceDouble: "448", image: "24.jpg"},
        {name: "پیتزا دجاج", description: "مرغ شاورما با پنیر و سس مخصوص", priceSingle: "228", priceDouble: "428", image: "25.jpg"},
        {name: "پیتزا پپرونی", description: "پپرونی با پنیر و سس مخصوص", priceSingle: "198", priceDouble: "298", image: "18.jpg"}
      ],
      "مقبلات (سالاد)": [
        {name: "تبوله", description: "جعفری، گوجه بلغور گندم، سس مخصوص زعتر", price: "100", image: "27.jpg"},
        {name: "حمص بطحینه", description: "ارده، نخود، روغن زیتون", price: "100", image: "28.jpg"},
        {name: "متبل", description: "ماست، ارده، بادمجان ذغالی", price: "100", image: "29.jpg"},
        {name: "بذنجانیه", description: "بادمجان سرخ شده، خیار، گوجه، فلفل دلمه، پیاز، سس مخصوص", price: "100", image: "30.JPG"},
        {name: "فته بذنجان", description: "بادمجان سرخ شده، ماست، ارده", price: "100", image: "31.jpg"},
        {name: "صحن مقبلات مُشکل", description: "۴نوع سینی مزه به دلخواه", price: "400", image: "32.JPG"}
      ],
      "باکس ها": [
        {name: "باکس ۲ نفره", description: "۲ عدد شاورما عربی + ۲ مدل سالاد + سس + نوشابه", price: "620", image: "33.jpg"},
        {name: "باکس ۲ نفره مُشکل", description: "۱ عدد شاورما عربی + ۱ عدد ساندویچ فلافل + ۲ مدل سالاد + سس + نوشابه", price: "520", image: "33.jpg"},
        {name: "باکس خانواده", description: "۵ عدد شاورما عربی + ۴ مدل سالاد + سس + نوشابه", price: "1,510", image: "35.jpg"},
        {name: "باکس معجنات", description: "9 عدد مینی معجنات به دلخواه", price: "765", image: "36.jpg"}
      ]
    };

    // ====== ابزارها ======
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => r.querySelectorAll(s);

    const faDigits = n => n.toLocaleString('fa-IR');
    const parseNum = s => parseInt(String(s).replace(/[^\d]/g, ''), 10);
    const formatPrice = s => {
      const num = parseNum(s);
      return isNaN(num) ? s : `${faDigits(num)} تومان`;
    };

    const iconFor = (cat) => {
      if (cat.includes('پیتزا')) return 'fa-pizza-slice';
      if (cat.includes('شاورما')) return 'fa-drumstick-bite';
      if (cat.includes('فلافل')) return 'fa-burger';
      if (cat.includes('مقبلات') || cat.includes('سالاد')) return 'fa-bowl-food';
      if (cat.includes('باکس')) return 'fa-box-open';
      return 'fa-utensils';
    };

    // ====== المان‌ها ======
    const sidebar = $('#sidebar');
    const grid = $('#grid');
    const itemsTitle = $('#itemsTitle span');
    const brandTitle = $('#brandTitle span');
    const imgModal = $('#imgModal');
    const modalImage = $('#modalImage');
    const toTop = $('#toTop');

    // Welcome & audio & theme
    const welcome = $('#welcome');
    const startBtn = $('#startBtn');
    const instaBtn = $('#instaBtn');
    const bgm = $('#bgm');
    const themeBtn = $('#themeBtn');

    // حالت تیره از LocalStorage
    const applyTheme = () => {
      const dark = localStorage.getItem('theme') === 'dark';
      document.documentElement.classList.toggle('dark', dark);
      themeBtn.innerHTML = dark
        ? '<i class="fa-solid fa-sun"></i><span class="hide-sm">ظاهر</span>'
        : '<i class="fa-solid fa-moon"></i><span class="hide-sm">ظاهر</span>';
    };
    applyTheme();

    themeBtn.addEventListener('click', () => {
      const dark = !(localStorage.getItem('theme') === 'dark');
      localStorage.setItem('theme', dark ? 'dark' : 'light');
      applyTheme();
    });

    // ساخت دکمه‌های دسته‌ها
    const categories = Object.keys(menuData);
    categories.forEach((cat, idx) => {
      const el = document.createElement('button');
      el.className = 'cat';
      el.innerHTML = `<i class="fa-solid ${iconFor(cat)}"></i><div class="name">${cat.replace('\\n','<br>')}</div>`;
      el.addEventListener('click', () => selectCategory(cat, el));
      sidebar.appendChild(el);
      if (idx === 0) {
        requestAnimationFrame(() => selectCategory(cat, el));
      }
    });

    let currentCategory = categories[0];

    function selectCategory(cat, el) {
      currentCategory = cat;
      $$('.cat').forEach(c => c.classList.remove('active'));
      el.classList.add('active');
      itemsTitle.textContent = cat === 'پیتزا لبنانی' ? 'پیتزا لبنانی (تک نفره و دو نفره)' : cat;
      brandTitle.textContent = 'منوی ' + cat;
      renderItems();
    }

    // ------ Lazy image loader با IntersectionObserver + اسکلت ------
    const io = new IntersectionObserver((entries) => {
      for (const entry of entries) {
        if (!entry.isIntersecting) continue;
        const img = entry.target;
        const real = img.dataset.src;
        if (real) {
          img.src = real;
          img.removeAttribute('data-src');
        }
        io.unobserve(img);
      }
    }, { root: $('#itemsWrap'), rootMargin: '250px 0px 350px 0px', threshold: 0 });

    const tinyPlaceholder = 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 4 3%22/%3E';

    function renderItems() {
      grid.innerHTML = '';
      const list = menuData[currentCategory] || [];

      list.forEach((item, idx) => {
        const card = document.createElement('article');
        card.className = 'card';
        card.style.animationDelay = `${idx * 60}ms`;

        const imgSrc = item.image;
        const hasDouble = currentCategory === 'پیتزا لبنانی';

        const priceHTML = hasDouble ? `
          <div class="price-row">
            <div class="price-col">
              <span class="price-label">تک نفره</span>
              <span class="price-tag">${formatPrice(item.priceSingle)}</span>
            </div>
            <div class="price-col">
              <span class="price-label">دو نفره</span>
              <span class="price-tag">${formatPrice(item.priceDouble)}</span>
            </div>
          </div>
        ` : `
          <div class="price-row">
            <span class="price-tag">${item.price ? formatPrice(item.price) : ''}</span>
          </div>
        `;

        card.innerHTML = `
          <div class="img-box loading">
            <img alt="${item.name}" loading="lazy" decoding="async" />
          </div>
          <div class="content-box">
            <div class="name">${item.name}</div>
            ${item.description ? `<div class="desc">${item.description}</div>` : ''}
            ${priceHTML}
          </div>
        `;

        const img = card.querySelector('img');
        const imgBox = card.querySelector('.img-box');

        // خطای تصویر → جایگزین لوگو
        const handleError = () => { img.src = 'logo.png'; img.style.objectFit = 'contain'; img.style.padding = '16px'; imgBox.classList.remove('loading'); };
        img.onerror = handleError;

        img.onload = () => imgBox.classList.remove('loading');

        // اولویت بالاتر برای چند تصویر اول (بالای صفحه)، بقیه lazy با IO
        if (idx < 4) {
          img.setAttribute('fetchpriority', 'high');
          img.src = imgSrc;
        } else {
          img.setAttribute('fetchpriority', 'low');
          img.src = tinyPlaceholder;
          img.dataset.src = imgSrc;
          io.observe(img);
        }

        // بازکردن در مودال
        img.addEventListener('click', (e) => {
          e.stopPropagation();
          const src = img.dataset.src || img.src;
          modalImage.src = src;
          modalImage.alt = item.name;
          imgModal.classList.add('open');
        });

        grid.appendChild(card);
      });

      // نشان دادن دکمه بالا
      const wrap = document.getElementById('itemsWrap');
      wrap.addEventListener('scroll', () => {
        toTop.classList.toggle('show', wrap.scrollTop > 400);
      }, { passive: true });
    }

    // مودال تصویر بستن
    document.getElementById('closeModal').addEventListener('click', () => imgModal.classList.remove('open'));
    imgModal.addEventListener('click', () => imgModal.classList.remove('open'));

    // دکمه بالا
    toTop.addEventListener('click', () => {
      document.getElementById('itemsWrap').scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Welcome & actions
    startBtn.addEventListener('click', () => {
      welcome.style.display = 'none';
      bgm.play().catch(() => {/* اگر مرورگر اجازه ندهد */});
    });

    instaBtn.addEventListener('click', () => {
      window.open('https://instagram.com/zaatar_lebanese', '_blank');
    });
  </script>
</body>
</html>
